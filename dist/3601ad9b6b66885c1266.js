import"core-js/modules/es.array.includes.js";import"core-js/modules/es.string.includes.js";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}import UI from"./UI.js";import HangmanLogic from"./Hangman.js";import{wordsArr}from"./wordLibrary.js";var GameManager=function(){function e(t){_classCallCheck(this,e),this.ui=new UI(this.startNewGame.bind(this),this.makeGuess.bind(this),this.isGameOver.bind(this)),this.hangmanLogic,this.updateUserGameData=t}return _createClass(e,[{key:"startNewGame",value:function(e,t,a){var n=e||this.setWord(a),r=t||this.setNumberOfGuesses(a),s=a||this.getDifficulty(n,t);this.hangmanLogic=new HangmanLogic(n,r,s);var i=this.hangmanLogic.getState;this.ui.renderNewGameToDom(i)}},{key:"makeGuess",value:function(e){var t=this.hangmanLogic.isGuessValid(e);if(!t.isValid)return this.ui.handleInvalidGuess(t.reason);this.hangmanLogic.makeGuess(e);var a=this.hangmanLogic.getState;this.ui.updateDomGameRender(a),this.isGameOver()&&(this.finishGame(),this.updateUserGameData())}},{key:"isGameOver",value:function(){return!!this.hangmanLogic.getState.isGameOver}},{key:"finishGame",value:function(){var e=this.getResult();this.ui.alert(e);var t=this.hangmanLogic.getState;this.ui.updateDomGameFinishedRender(t,e)}},{key:"isGameWon",value:function(){var e=this.hangmanLogic.getState;return e.initialGuesses,e.remainingGuesses,e.allLettersGuessed,e.gameWord===e.wordSoFar}},{key:"getResult",value:function(){var e=this.hangmanLogic.getState,t=e.initialGuesses,a=e.remainingGuesses,n=(e.allLettersGuessed,e.gameWord);return e.wordSoFar===n?a===t?"Amazing! Grade: S":a===t-1?"Well Done! Grade: A":a===t-2?"Well Done! Grade: B":a===t-3?"Well Done! Grade: C":a===t-4?"Well Done! Grade: D":"You Pass!":"Sorry, you lost!"}},{key:"returnStateOfGame",value:function(){return this.hangmanLogic.getState}},{key:"setWord",value:function(e){switch(e){case"Almost Impossible":return this.generateRandomWordWithLengthOf(10);case"Very Hard":return this.generateRandomWordWithLengthOf(6,9);case"Challenging":return this.generateRandomWordWithLengthOf(5);case"Easy":return this.generateRandomWordWithLengthOf(3,4)}}},{key:"setNumberOfGuesses",value:function(e){switch(e){case"Almost Impossible":return 2;case"Very Hard":return 3;case"Challenging":return 4;case"Easy":return 5}}},{key:"generateRandomWordWithLengthOf",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a="";a.length<e||a.length>t;)a=wordsArr[Math.floor(Math.random()*wordsArr.length)];return a}},{key:"amountOfUniqueLetters",value:function(e){for(var t="",a=0;a<e.length;a++)t.includes(e[a])||(t+=e[a]);return t.length}},{key:"getDifficulty",value:function(e,t){var a=this.amountOfUniqueLetters(e),n=a>=8&&t<=2||a>=6&&1===t,r=a>=4&&2===t||a>=5&&t<=3,s=a>=4&&t<=3||a>=2&&1===t;return console.log(n),n?"Almost Impossible":r?"Very Difficult":s?"Fairly Difficult":"Easy"}}]),e}();export default GameManager;